<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ML</title>
    <link href="/2023/03/22/ML/"/>
    <url>/2023/03/22/ML/</url>
    
    <content type="html"><![CDATA[<h1 id="一、VAE-BO"><a href="#一、VAE-BO" class="headerlink" title="一、VAE+BO"></a>一、VAE+BO</h1><h2 id="1-思路整理"><a href="#1-思路整理" class="headerlink" title="1. 思路整理"></a>1. 思路整理</h2><p>见链接：<a href="https://blog.csdn.net/qq_37672177/article/details/129498050">VAE+BO</a>  </p><img src="/2023/03/22/ML/VAE+BO.png" class title="This is a VAE+BO image">  ]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>MD simulation</title>
    <link href="/2023/03/22/MD%20simulation/"/>
    <url>/2023/03/22/MD%20simulation/</url>
    
    <content type="html"><![CDATA[<h1 id="一、GPUMD"><a href="#一、GPUMD" class="headerlink" title="一、GPUMD"></a>一、GPUMD</h1><p>链接1：<a href="https://github.com/brucefan1983/GPUMD">GPUMD安装包</a><br>链接2：<a href="https://gitlab.com/brucefan1983/nep-data">相关文献和nep数据</a><br>链接3：<a href="https://gpumd.org/">GPUMD手册</a><br>前后处理软件：<a href="https://gpyumd.readthedocs.io/en/latest/index.html#">gpymd-原子分组</a><br>　　　　　　　<a href="https://calorine.materialsmodeling.org/">calorine-弹性系数、声子..</a></p><h2 id="1-HNEMD"><a href="#1-HNEMD" class="headerlink" title="1. HNEMD"></a>1. HNEMD</h2><h3 id="1-1-输入-run-in-设置"><a href="#1-1-输入-run-in-设置" class="headerlink" title="1.1 输入(run.in)设置"></a>1.1 输入(<strong>run.in</strong>)设置</h3><pre><code class="hljs">potential   path/to/nep.txtvelocity    300ensemble    nvt_nhc 300 300 100time_step   1dump_thermo 1000run         1000000ensemble    nvr_nhc 300 300 100compute_hnemd 1000 0 0.00001 0compute_shc 2 250 1 1000 400 group 0 0run         10000000</code></pre><ul><li>第一行指定使用的势函数文件  </li><li>第二行设置初始温度  </li><li>给定的例子中运行了两次。第一次运行为平衡阶段：  <ul><li>使用<strong>NVT</strong>系综。目标温度为300K，耦合系数为100个时间步长（耦合时间与时间步长的比值），越大表示系统与恒温器耦合程度越低，也就是速度随温度的变化越小。</li><li>时间步长1fs。  </li><li>每1000步输出一个热力学数据。</li><li>总共运行一百万步。</li></ul></li><li>第二次运行计算热导率：<ul><li>使用nhc恒温器控制全局温度。</li><li>关键词<strong>compute_hnemd</strong>用来施加驱动力以及使用<strong>HNEMD</strong>方法计算热导率。输出每1000步热导率的平均值，分别在<em><strong>xyz</strong></em>三个不同方向给定驱动力参数大小。</li><li>关键词<strong>compute_shc</strong>用来计算光谱热导率（对象为0号分组方法中的第0组原子，对任意组计算shc效果一样）。每两步采集一个相关数据，运输方向为1（<em><strong>y</strong></em>方向）。频率点数为1000，最大角频率为400<em><strong>THZ</strong></em>。</li><li>运行一千万步。</li></ul></li></ul><h3 id="1-2-关于NPT系综ber恒压器的要点"><a href="#1-2-关于NPT系综ber恒压器的要点" class="headerlink" title="1.2 关于NPT系综ber恒压器的要点"></a>1.2 关于NPT系综ber恒压器的要点</h3><ul><li>需要给定不同方向的目标温度、弹性模量以及压力耦合系数。  </li><li>非周期性方向不需要控压（目标温度设置为0）。</li></ul><h3 id="1-3-理论推导"><a href="#1-3-理论推导" class="headerlink" title="1.3 理论推导"></a>1.3 <strong>理论推导</strong></h3><p>N个粒子的系统总能量由一般<strong>Hamiltonian</strong>描述为：<br>$$<br>H(r_{i},p_{i})&#x3D;\sum_{i}\frac{p_{i}^{2}}{2m_{i}}+U(r_{i})<br>$$<br><strong>r</strong>为粒子位置，<strong>p</strong>为粒子动量，<strong>m</strong>为粒子质量，<strong>U</strong>为粒子势能。<br>根据线性理论，引入微扰后，系统中某个物理量定义为：<br>$$<br>\left \langle B(t) \right \rangle &#x3D;\left \langle B \right \rangle ^{eq} -\beta \int_{-∞}^{t} \frac{\mathrm{d} }{\mathrm{d} t} \left \langle A(0)B(t-t’) \right \rangle ^{eq}F(t’)dt’<br>$$<br>将$\left \langle B \right \rangle ^{eq}$定义为0，引入热流<strong>J</strong>：<br>$$<br>\left \langle J(t) \right \rangle &#x3D;\frac{1}{k_{B}T} (\int_{0}^{t} dt’\left \langle J(t’)J(0) \right \rangle )F_{e}<br>$$<br>$F_{e}$是驱动力参数，$k_{B}$是波尔兹曼常数。由Green—Kubo关联式，有热导率公式：<br>$$<br>k_{\mu \nu }(t)&#x3D;\frac{1}{k_{B}T^{2}V} \int_{0}^{t} dt’\left \langle J_{\mu }(t’)J_{\nu }(0) \right \rangle<br>$$<br>$\mu、\nu$分别代表不同的方向。即：<br>$$<br>k(t)&#x3D;\frac{\left \langle J(t) \right \rangle}{TVF_{e}}<br>$$<br>上述定义的是实时热导率，波动较大，难以判断是否收敛。用累积平均热导率可以解决这个问题：<br>$$<br>k(t)&#x3D;\frac{1}{t}\int_{0}^{t}ds\frac{\left \langle J(s) \right \rangle}{TVF_{e}}<br>$$<br>接下来推导运动方程，热流的一般公式如下：<br>$$<br>J&#x3D;J^{kin}+J^{pot}&#x3D;\sum_{i}^{}\frac{p_{i}}{m_{i}}E_{i}+\sum_{i,j\ne i}^{}\frac{p_{i}}{m_{i}}(\frac{\partial U_{ij}}{\partial r_{ji}} r_{ij})<br>$$<br><strong>Hamiltonian</strong>对时间的导数如下：<br>$$<br>\frac{\mathrm{d} H}{\mathrm{d} t} &#x3D;\sum_{i}^{} \frac{p_{i}}{m_{i}}(D_{i}\cdot F_{e})&#x3D;J\cdot F_{e}<br>$$<br>联立得：<br>$$<br>D_{i}\cdot F_{e}&#x3D;E_{i}F_{e}+\sum_{j\ne i}{}(\frac{\partial U_{ij}}{\partial r_{ji}} r_{ij})\cdot F_{e}<br>$$<br>使系统动量守恒，最终得：<br>$$<br>D_{i}\cdot F_{e}&#x3D;E_{i}F_{e}+\sum_{j\ne i}{}(\frac{\partial U_{ij}}{\partial r_{ji}} r_{ij})\cdot F_{e}-\frac{1}{N}\sum_{j}E_{j}F_{e}-\frac{1}{N}\sum_{j}\sum_{k\ne j}(\frac{\partial U_{jk}}{\partial r_{kj}} r_{jk})\cdot F_{e}<br>$$</p><hr><h2 id="2-NEP"><a href="#2-NEP" class="headerlink" title="2. NEP"></a>2. NEP</h2><h3 id="2-1-制作训练集"><a href="#2-1-制作训练集" class="headerlink" title="2.1 制作训练集"></a>2.1 <strong>制作训练集</strong></h3><p>生成结构（不同温度、应变等用AIMD处理，pynep可用来丰富结构），DFT计算能量、作用力等，将数据集分割成训练集和测试集。<br>–<strong>[例] 单层PbTe训练集制作</strong>–  </p><ul><li>NVT系综下，通过从头算分子动力学（AIMD）模拟获得400个不同温度（300K、500K、700K和900K）的单元模型；  </li><li>使用HIPHIVE包获取100个有微小随机原子位移和晶格常数变化的单元模型；  </li><li>随机去除Pb或Te原子制造100个有缺陷的单元模型；  </li><li>NPT系综下，通过AIMD获得200个经过拉伸和双轴拉伸的单元模型；  </li><li>NPT系综下，通过AIMD获得300个不同温度（300K、500K、700K）的单元模型；  </li><li>使用PYNEP增加100个构型作为补充。</li></ul><h4 id="2-1-1-用VASP进行AIMD"><a href="#2-1-1-用VASP进行AIMD" class="headerlink" title="2.1.1 用VASP进行AIMD"></a>2.1.1 用VASP进行<strong>AIMD</strong></h4><p>输入文件：INCAR(条件设置)、POSCAR(模型)、POTCAR(赝势)、KPOINTS。<br><a href="https://vaspkit.com/index.html#">VASPKIT</a>：可用来生成输入文件和分析数据。<br><a href="https://www.vasp.at/wiki/index.php/The_VASP_Manual">VASP手册</a><br>系综：  </p><img src="/2023/03/22/MD%20simulation/vasp%E7%B3%BB%E7%BB%BC%E8%AE%BE%E7%BD%AE.png" class title="This is a 系综 image">  <p>a. 拉伸模拟<br>a.1 通过施加外部压力拉伸(三个方向都会被拉伸)<br><strong>INCAR</strong>(单层PbTe)</p><pre><code class="hljs">LCHARG = .FALSE. ; LWAVE = .FALSE.  ENCUT = 120  GGA = PS  System = singlepoint  LREAL= Auto  NCORE= 4  ALGO = very fast  MDALGO = 3  NWRITE = 2   ADDGRID = .TRUE.  PREC= AccurateIBRION = 0 ;  NSW = 1000 ;  POTIM = 1.0  TEBEG = 300  TEEND = 300ISIF=3  LANGEVIN_GAMMA = 100.0   100.0   100.0  LANGEVIN_GAMMA_L = 100.0  #PMASS = 1  PSTRESS = -100   #BMIX   = 0.0001  MAXMIX = 40  ISYM = 0  ISMEAR = 0; SIGMA = 0.05;  SMASS=0  </code></pre><h4 id="2-1-2-hiPhive-高阶力常数计算软件-x2F-开源"><a href="#2-1-2-hiPhive-高阶力常数计算软件-x2F-开源" class="headerlink" title="2.1.2 hiPhive(高阶力常数计算软件&#x2F;开源)"></a>2.1.2 hiPhive(高阶力常数计算软件&#x2F;开源)</h4><p>可以用来构建有随机<strong>原子位移和晶格常数变化</strong>的构型。<br><a href="https://hiphive.materialsmodeling.org/index.html">手册</a>  </p><h4 id="2-1-3-主动学习优化势函数"><a href="#2-1-3-主动学习优化势函数" class="headerlink" title="2.1.3 主动学习优化势函数"></a>2.1.3 主动学习优化势函数</h4><p><strong>PyNEP</strong>：通过最远过程采样策略补充未知构型。<br><a href="https://pynep.readthedocs.io/en/latest/index.html">手册</a><br>*<em>最简单朴素的方法(樊老师推荐)*<em>：用训练好的第一个nep.txt跑长时间MD(目标场景、目标构型，小体系推荐用lammps)，然后抽样(间隔100ps~1000ps，五十到一百个构型)，将抽样得到的构型进行DFT单点计算做成</em>train.xyz*，和之前训练用的nep.in以及得到的nep.txt放在一个文件夹，nep.in末尾加一行[<em>prediction 1</em>]，然后运行nep，看</em>train_xxx.out*。  如果这些结构的精度和训练集差不多，说明第一个势函数可靠，否则把误差较大的构型加入已有的训练集再训练一个，重复操作即可。</p><h3 id="2-2-nep-in设置"><a href="#2-2-nep-in设置" class="headerlink" title="2.2 nep.in设置"></a>2.2 nep.in设置</h3><ul><li>默认参数一般是训练精度相对较低，速度相对较高。<ul><li>改参数思路（在不较大影响速度的条件下提高精度）：修改（提高）<em>basis_size</em>不影响速度；计算速度对neuron数不敏感；<em>cutoff</em>对速度影响较大，计算量与截断三次方成正比。  </li><li>3.7版本从默认开始，仅调<strong>截断</strong>。有需要可以微调<em>nmax</em>和<em>neuron</em>，非常复杂的可以调大一点。</li></ul></li><li>控温和控压首选<strong>nvt_bdp</strong>和<strong>npt_scr</strong></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>建模</title>
    <link href="/2023/03/22/%E5%BB%BA%E6%A8%A1/"/>
    <url>/2023/03/22/%E5%BB%BA%E6%A8%A1/</url>
    
    <content type="html"><![CDATA[<p>相关链接：<a href="https://materialsproject.org/">材料数据库MP</a><br>　　　　　<a href="http://www.crystallography.net/cod/index.php">材料数据库COD</a><br>　　　　　<a href="http://img.chem.ucl.ac.uk/sgp/LARGE/sgp.htm">空间群分类</a><br>　　　　　<a href="https://en.wikipedia.org/wiki/Crystal_system">crystal_system介绍</a>    </p><img src="/2023/03/22/%E5%BB%BA%E6%A8%A1/%E6%99%B6%E6%A0%BC%E5%88%86%E7%B1%BB.png" class title="This is a cryatal system image">  <p>  <em>真空层用来模拟非周期边界，即*<em>真空层+周期边界条件&#x3D;不加真空层+非周期边界条件</em></em></p><h2 id="一、MS"><a href="#一、MS" class="headerlink" title="一、MS"></a>一、MS</h2><h3 id="1-1-使用MS构建xyz格式的原子模型"><a href="#1-1-使用MS构建xyz格式的原子模型" class="headerlink" title="1.1 使用MS构建xyz格式的原子模型"></a>1.1 使用MS构建xyz格式的原子模型</h3><ul><li>MS建立模型，另存为<strong>pdb</strong>&#x2F;<strong>cif</strong>格式的文件。</li><li>通过ovito将上述两种格式的文件转化为<strong>xyz</strong>文件，其中<strong>pdb</strong>文件能记录分组信息，而<strong>cif</strong>没有分组信息。</li></ul><h3 id="1-2-MS将单胞转换为原胞-参考"><a href="#1-2-MS将单胞转换为原胞-参考" class="headerlink" title="1.2 MS将单胞转换为原胞(参考)"></a>1.2 MS将单胞转换为原胞(<a href="https://mp.weixin.qq.com/s/NBWI1l-8ZY7WWvOhVOelXA">参考</a>)</h3><p>&amp;ensp;　　Build–&gt; symmetry–&gt; primitive cell (只有<strong>AFLOW</strong>和<strong>VASPKIT</strong>软件给出的原胞才是<strong>标准基矢</strong>形式的原胞)<br>经测试：不好用</p><hr><h2 id="二、ASE"><a href="#二、ASE" class="headerlink" title="二、ASE"></a>二、ASE</h2><p><a href="https://wiki.fysik.dtu.dk/ase/index.html">ASE手册</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello Everyone</title>
    <link href="/2023/03/22/hello-everyone/"/>
    <url>/2023/03/22/hello-everyone/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://creatzoo.github.io/">creatzoo</a>! This is my notes about some research issues. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems about my notes, you can email me by <a href="mailto:&#50;&#53;&#x38;&#x35;&#51;&#x32;&#x30;&#x32;&#57;&#x30;&#64;&#x71;&#x71;&#x2e;&#x63;&#111;&#x6d;">&#50;&#53;&#x38;&#x35;&#51;&#x32;&#x30;&#x32;&#57;&#x30;&#64;&#x71;&#x71;&#x2e;&#x63;&#111;&#x6d;</a></p><h2 id="1-Quick-Start"><a href="#1-Quick-Start" class="headerlink" title="1 Quick Start"></a>1 Quick Start</h2><h3 id="1-1-Create-a-new-post"><a href="#1-1-Create-a-new-post" class="headerlink" title="1.1 Create a new post"></a>1.1 Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a><br>$\quad\quad\quad\quad$<a href="https://markdown.com.cn/basic-syntax/">Markdown语法</a><br>$\quad\quad\quad\quad$<a href="https://www.latexlive.com/">公式编辑器</a></p><h3 id="1-2-Run-server"><a href="#1-2-Run-server" class="headerlink" title="1.2 Run server"></a>1.2 Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="1-3-Generate-static-files"><a href="#1-3-Generate-static-files" class="headerlink" title="1.3 Generate static files"></a>1.3 Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="1-4-Deploy-to-remote-sites"><a href="#1-4-Deploy-to-remote-sites" class="headerlink" title="1.4 Deploy to remote sites"></a>1.4 Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h3 id="1-5-Update-blog"><a href="#1-5-Update-blog" class="headerlink" title="1.5 Update blog"></a>1.5 Update blog</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean <span class="hljs-comment">#清除缓存</span><br>$ hexo d -g  <span class="hljs-comment">#更新网页</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
